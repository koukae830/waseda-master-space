go:-
    csp(Starts,Tasks),
    labeling_ff_min(Starts),
    cgWindow(Win,"Job shop scheduling"),
    Win^topMargin #= 50, Win^leftMargin #= 50,
    Win^width #>1000,
    handleWindowClosing(Win),
    visualize_tasks(Win,Tasks).
    
csp(A,Tasks) :-
        B=[0..92],
        C=[11..103],
        D=[21..113],
        E=[37..129],
        F=[47..139],
        G=[0..110],
        H=[7..117],
        I=[18..128],
        J=[32..142],
        K=[36..146],
        L=[0..105],
        M=[8..113],
        N=[17..122],
        O=[30..135],
        P=[37..142],
        Q=[0..112],
        R=[3..115],
        S=[12..124],
        T=[20..132],
        U=[26..138],
        V=[0..99],
        W=[7..106],
        X=[17..116],
        Y=[29..128],
        Z=[39..138],
        A1=[0..114],
        B1=[7..121],
        C1=[10..124],
        D1=[18..132],
        E1=[24..138],
        F1=[0..115],
        G1=[7..122],
        H1=[14..129],
        I1=[22..137],
        J1=[30..145],
        K1=[0..103],
        L1=[11..114],
        M1=[14..117],
        N1=[30..133],
        O1=[40..143],
        P1=[10..120],
        Q1=[16..126],
        R1=[26..136],
        S1=[35..145],
        T1=[11..116],
        U1=[15..120],
        V1::B,
        W1::C,
        X1::D,
        Y1::E,
        Z1::F,
        A2::G,
        B2::H,
        C2::I,
        D2::J,
        E2::K,
        F2::L,
        G2::M,
        H2::N,
        I2::O,
        J2::P,
        K2::Q,
        L2::R,
        M2::S,
        N2::T,
        O2::U,
        P2::V,
        Q2::W,
        R2::X,
        S2::Y,
        T2::Z,
        U2::A1,
        V2::B1,
        W2::C1,
        X2::D1,
        Y2::E1,
        Z2::F1,
        A3::G1,
        B3::H1,
        C3::I1,
        D3::J1,
        E3::K1,
        F3::L1,
        G3::M1,
        H3::N1,
        I3::O1,
        J3::G,
        K3::P1,
        L3::Q1,
        M3::R1,
        N3::S1,
        O3::L,
        P3::T1,
        Q3::U1,
        R3::O,
        S3::P,
        A=[V1,W1,X1,Y1,Z1,A2,B2,C2,D2,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,A3,B3,C3,D3,E3,F3,G3,H3,I3,J3,K3,L3,M3,N3,O3,P3,Q3,R3,S3],
        V1+11#=<W1,
        W1+10#=<X1,
        X1+16#=<Y1,
        Y1+10#=<Z1,
        A2+7#=<B2,
        B2+11#=<C2,
        C2+14#=<D2,
        D2+4#=<E2,
        F2+8#=<G2,
        G2+9#=<H2,
        H2+13#=<I2,
        I2+7#=<J2,
        K2+3#=<L2,
        L2+9#=<M2,
        M2+8#=<N2,
        N2+6#=<O2,
        P2+7#=<Q2,
        Q2+10#=<R2,
        R2+12#=<S2,
        S2+10#=<T2,
        U2+7#=<V2,
        V2+3#=<W2,
        W2+8#=<X2,
        X2+6#=<Y2,
        Z2+7#=<A3,
        A3+7#=<B3,
        B3+8#=<C3,
        C3+8#=<D3,
        E3+11#=<F3,
        F3+3#=<G3,
        G3+16#=<H3,
        H3+10#=<I3,
        J3+10#=<K3,
        K3+6#=<L3,
        L3+10#=<M3,
        M3+9#=<N3,
        O3+11#=<P3,
        P3+4#=<Q3,
        Q3+15#=<R3,
        R3+7#=<S3,
        cumulative([O3,K3,F3,D3,X2,T2,O2,F2,B2,V1], [11,6,3,4,6,11,11,8,11,11], [1,1,1,1,1,1,1,1,1,1], 1),
        cumulative([P3,J3,I3,C3,Y2,Q2,N2,J2,E2,W1], [4,10,6,8,11,10,6,7,3,10], [1,1,1,1,1,1,1,1,1,1], 1),
        cumulative([Q3,L3,G3,B3,W2,R2,M2,H2,C2,X1], [15,10,16,8,8,12,8,13,14,16], [1,1,1,1,1,1,1,1,1,1], 1),
        cumulative([R3,M3,H3,Z2,U2,P2,L2,I2,A2,Y1], [7,9,10,7,7,7,9,7,7,10], [1,1,1,1,1,1,1,1,1,1], 1),
        cumulative([S3,N3,E3,A3,V2,S2,K2,G2,D2,Z1], [7,4,11,7,3,10,3,9,4,10], [1,1,1,1,1,1,1,1,1,1], 1),
        Tasks=[t(O3,Row1,11),t(K3,Row1,6),t(F3,Row1,3),t(D3,Row1,4),t(X2,Row1,6),t(T2,Row1,11),t(O2,Row1,11),t(F2,Row1,8),t(B2,Row1,11),t(V1,Row1,11),
	       t(P3,Row2,4),t(J3,Row2,10),t(I3,Row2,6),t(C3,Row2,8),t(Y2,Row2,11),t(Q2,Row2,10),t(N2,Row2,6),t(J2,Row2,7),t(E2,Row2,3),t(W1,Row2,10),
	       t(Q3,Row3,15),t(L3,Row3,10),t(G3,Row3,16),t(B3,Row3,8),t(W2,Row3,8),t(R2,Row3,12),t(M2,Row3,8),t(H2,Row3,13),t(C2,Row3,14),t(X1,Row3,16),
	       t(R3,Row4,7),t(M3,Row4,9),t(H3,Row4,10),t(Z2,Row4,7),t(U2,Row4,7),t(P2,Row4,7),t(L2,Row4,9),t(I2,Row4,7),t(A2,Row4,7),t(Y1,Row4,10),
	       t(S3,Row5,7),t(N3,Row5,4),t(E3,Row5,11),t(A3,Row5,7),t(V2,Row5,3),t(S2,Row5,10),t(K2,Row5,3),t(G2,Row5,9),t(D2,Row5,4),t(Z1,Row5,10)],
        Row1=100,
        Row2=140,
        Row3=180,
        Row4=220,
        Row5=260.

visualize_tasks(Win,Tasks):-
    length(Tasks,N),
    length(Colors,N),
    gen_colors(Colors,100,250,50),
    gen_rects(Tasks,Colors,Win,Rects),
    cgShow(Rects).
    
gen_colors([],_,_,_).
gen_colors([c(Red,Green,Blue)|Colors],Red,Green,Blue):-
    Red1 is (Red+20) mod 255,
    Green1 is (Green+30) mod 255,
    Blue1 is (Blue+40) mod 255,
    gen_colors(Colors,Red1,Green1,Blue1).

gen_rects([],[],Win,[]).
gen_rects([t(X,Y,Width)|Tasks],[c(Red,Green,Blue)|Colors],Win,[Rect|Rects]):-
    cgRectangle(Rect),
    Rect^x #= X*5,
    Rect^y #= Y,
    Rect^width #= Width*5,
    Rect^height #= 20,
    cgColor(Color),
    Color^red #= Red, Color^green #= Green, Color^blue #= Blue,
    Rect^color #= Color,
    Rect^window #= Win,
    gen_rects(Tasks,Colors,Win,Rects).
    
handleWindowClosing(Win),{windowClosing(Win)} => cgClose(Win).

    
    

    
    
